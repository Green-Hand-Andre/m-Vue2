{"version":3,"file":"vue.js","sources":["../src/observe/index.js","../src/state.js","../src/init.js","../src/index.js"],"sourcesContent":["class Observer{\r\n    constructor(data){\r\n        // Object.defineProperty只能劫持已经存在的后增的或者删除的不知道\r\n        this.walk(data);\r\n\r\n    }\r\n    walk(data){\r\n        // 重新定义属性\r\n        Object.keys(data).forEach(key=>defineReactive(data,key,data[key]))\r\n\r\n\r\n    }\r\n}\r\n\r\nexport function defineReactive(target,key,value){\r\n    observe(value)\r\n    Object.defineProperty(target,key,{\r\n        get(){//取值\r\n            return value;\r\n\r\n        },\r\n        set(newvalue){//修改\r\n            if(newvalue === value) return\r\n            observe(newvalue)\r\n            value =  newvalue;\r\n\r\n        }\r\n    })\r\n\r\n\r\n}\r\n\r\nexport function observe(data){\r\n    if(typeof data !== \"object\" || data == null){\r\n        return;\r\n\r\n    }\r\n    return new Observer(data);\r\n\r\n}"," import { observe } from \"./observe/index\";\r\n \r\n export function initState(vm){\r\n    const opts = vm.$options;//获取所有选项\r\n    if(opts.data){\r\n        initData(vm);\r\n    }\r\n}\r\nfunction proxy(vm,target,key){\r\n    Object.defineProperty(vm,key,{\r\n        get(){\r\n            return vm[target][key]\r\n\r\n        },\r\n        set(newvalue){\r\n            vm[target][key] = newvalue\r\n        }\r\n    })\r\n\r\n}\r\nfunction initData(vm){\r\n    let data = vm.$options.data;\r\n    debugger\r\n    \r\n    data = typeof data === \"function\" ? data.call(this) : data\r\n    vm._data = data;\r\n    \r\n    observe(data)\r\n    for(let key in data){\r\n        proxy(vm,\"_data\",key)\r\n\r\n    }\r\n\r\n    \r\n\r\n}","\r\nimport {initState} from \"./state\"\r\nexport function initMixin(Vue){\r\n    // 给vue增加init方法\r\n    debugger\r\n    Vue.prototype._init = function(options){\r\n\r\n        const vm = this;\r\n        vm.$options = options;//将用户的选项挂在实例上\r\n        initState(vm)\r\n        if(options.el){\r\n            vm.$mount(options.el)\r\n        }\r\n\r\n    }\r\n    Vue.prototype.$mount = function(el){\r\n        const vm = this;\r\n        el = document.querySelector(el);\r\n        let ops = vm.$options;\r\n        if(!ops.render){\r\n            let template;\r\n            if(!ops.template&&el){\r\n                // 没模板但是有el\r\n                template = el.outerHTML;\r\n            }else{\r\n                if(el){\r\n                    template = ops.template\r\n                }\r\n\r\n            }\r\n            if(template){\r\n                const render = compileToFunction(template);\r\n                ops.render = render;\r\n            }\r\n            console.log(template)\r\n            \r\n        }\r\n        ops.render\r\n    }\r\n\r\n}\r\n\r\n\r\n","import {initMixin} from \"./init\"\r\n\r\nfunction Vue(options){\r\n    debugger\r\n    this._init(options)\r\n\r\n}\r\n\r\ninitMixin(Vue)\r\nexport default Vue;\r\n"],"names":["Observer","data","walk","Object","keys","forEach","key","defineReactive","target","value","observe","defineProperty","get","set","newvalue","initState","vm","opts","$options","initData","proxy","call","_data","initMixin","Vue","prototype","_init","options","el","$mount","document","querySelector","ops","render","template","outerHTML","compileToFunction","console","log"],"mappings":"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"}